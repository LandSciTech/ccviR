<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using the ccviR app • ccviR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Using the ccviR app">
<meta property="og:description" content="ccviR">
<meta property="og:image" content="https://landscitech.github.io/ccviR/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ccviR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/app_vignette.html">Using the ccviR app</a>
    </li>
    <li>
      <a href="../articles/data_prep_vignette.html">Preparing Custom Climate Data</a>
    </li>
    <li>
      <a href="../articles/package_vignette.html">Using the ccviR package</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/see24/ccviR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Using the ccviR app</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/see24/ccviR/blob/HEAD/vignettes/app_vignette.Rmd" class="external-link"><code>vignettes/app_vignette.Rmd</code></a></small>
      <div class="hidden name"><code>app_vignette.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The ccviR app implements the <a href="https://www.natureserve.org/conservation-tools/climate-change-vulnerability-index" class="external-link">NatureServe
Climate Change Vulnerability Index (CCVI)</a> in a Shiny App. The app
allows all of the geospatial aspects of calculating the CCVI to be done
in R, removing the need for separate GIS calculations. It also includes
new features and enhanced user friendliness to make it easier to
calculate the index and explore the results.</p>
<p>The NatureServe CCVI is a trait based climate change vulnerability
assessment framework that can also include observed and modeled
responses to climate change. The NatureServe CCVI includes three
commonly used components of vulnerability: exposure, sensitivity and
adaptive capacity and optionally incorporates the results of documented
or modeled responses to climate change. Exposure is assessed by
determining the proportion of the species range that falls into 6
classes of temperature and moisture change, which is used to determine
an exposure multiplier. Sensitivity and adaptive capacity and responses
to climate change are assessed by scoring vulnerability factors (23 and
4 respectively), on a scale from ‘neutral’ (0) to ‘greatly increases
vulnerability’ (3). Factors that cannot be answered can be left blank
and contribute 0 to the total score, but if fewer than 13 are scored the
index value can not be calculated. The sensitivity and adaptive capacity
section scores are then multiplied by an exposure multiplier and summed,
while the scores for the response to climate change section are simply
summed. An index value is then determined for each section by applying a
set of thresholds to the scores. The two index values are then combined
using a table that gives more weight to the sensitivity and adaptive
capacity section. The possible index values are Less Vulnerable,
Moderately Vulnerable, Highly Vulnerable, Extremely Vulnerable or
Insufficient Evidence if not enough factors of the CCVI are scored. For
more detailed information on how the index works and how each factor is
scored see the <a href="https://www.natureserve.org/sites/default/files/guidelines_natureserveclimatechangevulnerabilityindex_r3.02_1_jun_2016.pdf" class="external-link">NatureServe
CCVI Guidelines</a> and the references below.</p>
</div>
<div class="section level2">
<h2 id="launching-the-app">Launching the app<a class="anchor" aria-label="anchor" href="#launching-the-app"></a>
</h2>
<p>The app is launched by calling the <code><a href="../reference/run_ccvi_app.html">run_ccvi_app()</a></code>
function, which will launch the app in the user’s default internet
browser. All file selection windows will start in the current working
directory. To run the app with data stored in a different folder you can
call <code><a href="../reference/run_ccvi_app.html">run_ccvi_app()</a></code> with the folder path as the first
argument. For example, if all of the data is stored in a subdirectory
named “data” of the RStudio project where I am calling the function I
would call <code>run_ccvi_app("data")</code> to avoid having to open the
data folder every time I select a file. Alternatively, the complete path
to the data folder can be supplied
e.g. “C:/Users/username/Documents/path/to/folder” (Note that paths in R
must be supplied using forward slashes).</p>
</div>
<div class="section level2">
<h2 id="run-a-demonstration">Run a demonstration<a class="anchor" aria-label="anchor" href="#run-a-demonstration"></a>
</h2>
<p>Before using the app to assess a real species we recommend walking
through the app with the demo data set provided. Run the code below to
get started.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/see24/ccviR" class="external-link">ccviR</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/run_ccvi_app.html">run_ccvi_app</a></span><span class="op">(</span><span class="st">"demo"</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="getting-started">Getting started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h3>
<p>The Welcome Tab provides information on the Index and the data needed
to calculate it.</p>
<p>For the demonstration species all the required data is included in
the package, but for a real species you will need to either, <a href="https://drive.google.com/drive/folders/18mO5GDUmwi-nswhIAC36bmtYsvmqNQkH?usp=share_link" class="external-link">download</a>
a prepared set of climate data, unzip it and store it in a convenient
folder, or create your own (see
<code><a href="../articles/data_prep_vignette.html">vignette("data_prep_vignette", package = "ccviR")</a></code>).</p>
<p>In addition to the climate data the following spatial data sets for
each species can be provided:</p>
<ul>
<li>Species North American or global range polygon (required): The
complete area occupied by the species in North America.</li>
<li>Assessment area polygon (required): The area within which the
species vulnerability is being assessed. For example, a country,
province, state, or protected area.</li>
<li>Physiological thermal niche (PTN) polygon: The PTN polygon should
include cool or cold environments occupied by the species that may be
lost or reduced in the assessment area as a result of climate
change.</li>
<li>Non-breeding range polygon: If applicable, the area outside North
America occupied in the non-breeding season.</li>
<li>Projected range change raster: The modeled change in the species
range caused by climate change. The values of the raster cells should
indicate whether the cell was lost, maintained, gained or was never
included in the range.</li>
</ul>
<p>The species range and assessment area are required but other spatial
data sets are optional. If the non-breeding range is not included the
migratory exposure index will not be calculated. If spatial data for the
projected range change or PTN are not provided these factors can be
filled in manually based on non-spatial information.</p>
<p>For this example all of the data is provided with the package.</p>
<p>Press “Start” to begin calculating the index.</p>
</div>
<div class="section level3">
<h3 id="species-information">Species information<a class="anchor" aria-label="anchor" href="#species-information"></a>
</h3>
<p>On this page, you will provide some basic details about the species.
Make sure to select the appropriate taxonomic group since some aspects
of the index are conditional on this. For the demonstration select
“Vascular Plant”. See the NatureServe Guidelines to better understand
the meaning of the cave dwelling and migratory check boxes. For the
demonstration do not check either. Click “Next”.</p>
</div>
<div class="section level3">
<h3 id="spatial-data-analysis">Spatial data analysis<a class="anchor" aria-label="anchor" href="#spatial-data-analysis"></a>
</h3>
<p>On this tab, you will load the spatial data used by the index and see
the results of the spatial analysis for exposure to climate change. For
the “Folder location of prepared climate data” you need to tell the app
where you stored the climate data that it should use. This will either
be the folder that you unzipped the downloaded climate data into or the
output folder you selected in the data preparation app. For this example
the prepared climate data can be found under “clim_files &gt;
processed”.</p>
<p><img src="clim_dir.PNG" style="width:100.0%"></p>
<p>Then, select the range polygon for the species by selecting the file
“rng_poly.shp”, the assessment area by selecting the “assess_poly.shp”
file and the “ptn_poly.shp” for the physiological thermal niche. Leave
the non-breeeding range blank since we are assuming this species is not
migratory. For the projected range change raster, select “Yes, multiple
range change rasters will be provided, one for each scenario.” This will
open a new section where you can select a raster file for each scenario,
select “rng_chg_45.tif” for the RCP 4.5 scenario and “rng_chg_85.tif”
for the RCP 8.5 scenario. If range change rasters are not available for
each scenario a single raster can be used but this assumes the projected
range change is the same in all scenarios.</p>
<p><img src="rng_chng_multi.PNG" style="width:75.0%"></p>
<p>Next, specify how the raster should be classified into lost, gained,
maintained or not suitable. For the example use the default values,
which are for a raster where lost is -1, maintained in 0, gained is 1
and not suitable is not used so it is flagged with 99. The the gain
multiplier allows you to ignore gains by setting it to 0 but we will
leave it at 1 which assumes that the model has already accounted for
whether habitat gains are likely to be realized.</p>
<p><img src="gain_mod_run.PNG" style="width:75.0%"></p>
<p>Then click “Run”. A loading symbol will appear while the data is
being processed. When the processing is complete click “Next”.</p>
<p>On the Exposure Results page there are interactive maps of climate
change exposure. Exposure is determined by the change in temperature or
moisture that is expected to occur in the future within the species
range in the assessment area. The exposure maps are created by taking
current climate - future climate and then classifying the results into
six categories using the median and 1/2 the interquartile range. Thus,
negative values for temperature indicate warmer conditions (0B0C) and
negative values for moisture (mm) indicate drier conditions. The real
climate data will cover all of North America but for the demonstration
we are using a subset from New Brunswick. The tables display the
proportion of the species range in each class. The exposure multiplier
is determined by the level of exposure and is used to modify the
sensitivity and adaptive capacity components of the index based on
exposure to climate change. To view the map for different scenarios
click the layer symbol and toggle each layer on or off.</p>
<p><img src="temp_exp1.PNG" style="width:75.0%"></p>
<p><img src="temp_exp2.PNG" style="width:75.0%"></p>
<p>The non-breeding range of the species is used to determine the
migratory exposure index based on the climate change exposure index
(CCEI). The CCEI is a metric of climate change exposure that indicates
the level of exposure to both temperature and moisture change using the
Euclidean distance, see the NatureServe guidelines for a full
description. Since our demonstration species is non-migratory this
section is blank.</p>
<p>Once you have finished exploring the maps click “Next”.</p>
</div>
<div class="section level3">
<h3 id="vulnerability-questions">Vulnerability questions<a class="anchor" aria-label="anchor" href="#vulnerability-questions"></a>
</h3>
<p>Vulnerability questions are detailed questions that the index uses to
score the species’ indirect exposure, sensitivity, adaptive capacity and
modeled or documented responses to climate change. Descriptions of how
to interpret and score the questions are available in the NatureServe
guidelines which are included as a pop-up if you click the “Show
guidelines” button.</p>
<p><img src="vulnqs.PNG" style="width:75.0%"></p>
<p>Some vulnerability questions are answered based on an analysis of
spatial data and these questions are dealt with on the next tab. For the
demonstration, you can select any check box that you want for each
question. You can check more than one box to reflect uncertainty. Try a
few different versions and see how it affects the result! Questions that
are unknown can be left blank. There are three sections. ‘Section B:
Indirect Exposure to Climate Change’ and ‘Section C: Sensitivity and
Adaptive Capacity’ are required and if less than 10 of the 20 questions
are answered the index result will be Insufficient Evidence. ‘Section D:
Documented or Modeled Response to Climate Change’ is optional and if
none of the questions are answered the index will be calculated without
it. Click “Next” to go to the next tab.</p>
</div>
<div class="section level3">
<h3 id="spatial-vulnerability-questions">Spatial Vulnerability Questions<a class="anchor" aria-label="anchor" href="#spatial-vulnerability-questions"></a>
</h3>
<p>This tab includes the vulnerability questions that have a spatial
component. Each question includes a map and table showing how the data
has been summarized. The check box is pre-selected based on the spatial
data analysis but can be changed if needed.</p>
<p><img src="spat_vulnqs.PNG" style="width:75.0%"></p>
<p>Note that if the check box is changed and then the “Run” button on
the Spatial Analysis page is clicked again, you will see a warning that
the value of the check boxes on this page will be updated to the value
based on the re-run spatial analysis. The comments will not be affected
though, so you can explain the reason for any adjustments in the
comments and then remake those adjustments if they are still applicable.
If the spatial data for a vulnerability question was not provided on the
‘Spatial Data Analysis’ tab then the map will not be included and the
question can be answered using non-spatial information or left blank for
unknown.</p>
<p>The modeled response to climate change will be different depending on
the climate change scenario used so the modeled future range change map
includes a layer for each scenario which can be toggled on or off in the
same way as the exposure maps. The responses to these questions can not
be edited when multiple change rasters are used.</p>
<p><img src="spat_vulnqs2.PNG" style="width:75.0%"></p>
<p>For the demonstration, leave the check boxes as they are and then
click “Next”.</p>
</div>
<div class="section level3">
<h3 id="results">Results<a class="anchor" aria-label="anchor" href="#results"></a>
</h3>
<p>On the Results page, click “Calculate” to calculate the index value.
Once loaded the first section presents the climate change vulnerability
index and migratory exposure index for each climate scenario.</p>
<p><img src="results_dials.PNG" style="width:75.0%"></p>
<p>The Data Completeness table highlights how many questions were
answered in each section. The index is more reliable when more questions
are answered.</p>
<p>To account for uncertainty in the vulnerability questions you can
provide more than one answer to each question. The overall index value
is calculated based on the average score for each question but the
uncertainty in the index value is also explored using Monte Carlo
simulations. 1000 simulations are run and in each simulation one of the
selected values is picked for each vulnerability question. Then the
index is re-calculated. The Variation in Index bar chart shows the
proportion of simulations that had each index value for each scenario.
If all the simulations had the same index value then the uncertainty in
the answers to vulnerability questions does not influence the index. If
the index values are different then the index value is less certain.</p>
<p><img src="results_variation.PNG" style="width:75.0%"></p>
<p>The next graph shows how the scores based on exposure, sensitivity
and adaptive capacity are combined with the scores based on documented
or modeled response to climate change, to produce the qualitative index
value. The colours show the location of the thresholds used to determine
the index, the points show the score for each scenario and the lines
show the range of scores produced by the Monte Carlo simulations.</p>
<p><img src="comb_ind_plot.PNG" style="width:75.0%"></p>
<p>The last graph shows the scores for each vulnerability factor in each
scenario. The scores reflect the the answer to the question and the
exposure multiplier that was applied.</p>
<p><img src="vulnq_plot.PNG" style="width:100.0%"></p>
<p>Once you are finished with reviewing the results you should save the
data as a csv file to keep in your records.</p>
<p>If you go back and change the answer to a vulnerability question you
will need to click the “Calculate” button again to see the updated
results.</p>
</div>
<div class="section level3">
<h3 id="saving-the-app">Saving the app<a class="anchor" aria-label="anchor" href="#saving-the-app"></a>
</h3>
<p>The state of the app can be saved by clicking the “Save” button at
the bottom of the Results page. A pop up will appear that asks you name
the csv file that will store the app data. Be sure to save this
somewhere that is easy to remember because you will need to find it
again to load the saved app. To load the app with the saved state click
“Load” at the bottom of the Welcome page and select the saved csv
file.</p>
<p>Note, only the path to the spatial data is stored, not the data
itself, so the app will not be able to load if data is moved or its name
is changed. If the data has moved, you will get an error message but you
can go back to the Spatial Analysis tab and select the new file location
and then press “Run” which will re-run the spatial analysis but keep the
answers to the non-spatial vulnerability questions from the saved
file.</p>
</div>
</div>
<div class="section level2">
<h2 id="troubleshooting">Troubleshooting<a class="anchor" aria-label="anchor" href="#troubleshooting"></a>
</h2>
<p>If you have a problem in the app you can look at the output in the R
console for a clue about what is going wrong. The output will include
messages, warnings and any error messages that are produced. You can
ignore warnings unless something else has gone wrong. Most errors will
show in the app but in some situations the app will go grey and the
error message can be found in the R console.</p>
<p>If you have persistent problems with the app you can do the same
analysis using the ccviR package. You will often be able to figure out
what is causing the problem and return to the app. See
<code><a href="../articles/package_vignette.html">vignette("package_vignette", package = "ccviR")</a></code> for a
tutorial on how to use the package.</p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Young, B. E., K. R. Hall, E. Byers, K. Gravuer, G. Hammerson, A.
Redder, and K. Szabo. 2012. Rapid assessment of plant and animal
vulnerability to climate change. Pages 129-150 in Wildlife Conservation
in a Changing Climate, edited by J. Brodie, E. Post, and D. Doak.
University of Chicago Press, Chicago, IL. <a href="https://doi.org/10.7208/9780226074641-007" class="external-link uri">https://doi.org/10.7208/9780226074641-007</a></p>
<p>Young, B. E., N. S. Dubois, and E. L. Rowland. 2015. Using the
Climate Change Vulnerability Index to inform adaptation planning:
lessons, innovations, and next steps. Wildlife Society Bulletin
39:174-181.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Sarah Endicott.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
