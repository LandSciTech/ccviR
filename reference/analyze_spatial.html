<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Run the spatial analysis — analyze_spatial • ccviR</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Run the spatial analysis — analyze_spatial"><meta name="description" content="Run the required spatial analysis to create the spat_df input for
calc_vulnerability and clip the range polygon to the
appropriate scales."><meta property="og:description" content="Run the required spatial analysis to create the spat_df input for
calc_vulnerability and clip the range polygon to the
appropriate scales."><meta property="og:image" content="https://landscitech.github.io/ccviR/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ccviR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/app_vignette2.html">Using the ccviR App</a></li>
    <li><a class="dropdown-item" href="../articles/data_prep_vignette.html">Preparing Custom Climate Data</a></li>
    <li><a class="dropdown-item" href="../articles/package_vignette.html">Using the ccviR package</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/see24/ccviR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Run the spatial analysis</h1>
      <small class="dont-index">Source: <a href="https://github.com/see24/ccviR/blob/master/R/analyze_spatial.R" class="external-link"><code>R/analyze_spatial.R</code></a></small>
      <div class="d-none name"><code>analyze_spatial.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Run the required spatial analysis to create the <code>spat_df</code> input for
<code><a href="calc_vulnerability.html">calc_vulnerability</a></code> and clip the range polygon to the
appropriate scales.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">analyze_spatial</span><span class="op">(</span></span>
<span>  <span class="va">range_poly</span>,</span>
<span>  <span class="va">scale_poly</span>,</span>
<span>  <span class="va">clim_vars_lst</span>,</span>
<span>  non_breed_poly <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ptn_poly <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  hs_rast <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  hs_rcl <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  protected_poly <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  gain_mod <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  scenario_names <span class="op">=</span> <span class="st">"Scenario 1"</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-range-poly">range_poly<a class="anchor" aria-label="anchor" href="#arg-range-poly"></a></dt>
<dd><p>an sf polygon object giving the species range.</p></dd>


<dt id="arg-scale-poly">scale_poly<a class="anchor" aria-label="anchor" href="#arg-scale-poly"></a></dt>
<dd><p>an sf polygon object giving the area of the assessment</p></dd>


<dt id="arg-clim-vars-lst">clim_vars_lst<a class="anchor" aria-label="anchor" href="#arg-clim-vars-lst"></a></dt>
<dd><p>a list of climate data, the result of
<code><a href="get_clim_vars.html">get_clim_vars</a></code></p></dd>


<dt id="arg-non-breed-poly">non_breed_poly<a class="anchor" aria-label="anchor" href="#arg-non-breed-poly"></a></dt>
<dd><p>Optional. An sf polygon object giving the species range
in the non-breeding season.</p></dd>


<dt id="arg-ptn-poly">ptn_poly<a class="anchor" aria-label="anchor" href="#arg-ptn-poly"></a></dt>
<dd><p>Optional. An sf polygon object giving the locations that are
considered part of the physiological thermal niche (See NatureServe
Guidelines for definition).</p></dd>


<dt id="arg-hs-rast">hs_rast<a class="anchor" aria-label="anchor" href="#arg-hs-rast"></a></dt>
<dd><p>Optional. A SpatRaster object with results from a model of the
change in the species' range caused by climate change. To supply different
results for each scenario use a raster with multiple layers and ensure that the order of
the layers matches the order of <code>scenario_names</code>.</p></dd>


<dt id="arg-hs-rcl">hs_rcl<a class="anchor" aria-label="anchor" href="#arg-hs-rcl"></a></dt>
<dd><p>a matrix used to classify <code>hs_rast</code> into 0: not suitable, 1:
lost, 2: maintained, 3: gained. See <code><a href="rng_chg_mat.html">rng_chg_mat()</a></code> for a helper function.
See <code><a href="https://rspatial.github.io/terra/reference/classify.html" class="external-link">classify</a></code> for details on the matrix format.</p></dd>


<dt id="arg-protected-poly">protected_poly<a class="anchor" aria-label="anchor" href="#arg-protected-poly"></a></dt>
<dd><p>Optional. A sf polygon object with protected areas.</p></dd>


<dt id="arg-gain-mod">gain_mod<a class="anchor" aria-label="anchor" href="#arg-gain-mod"></a></dt>
<dd><p>a number between 0 and 1 that can be used to down-weight gains
in the modeled range change under climate change</p></dd>


<dt id="arg-scenario-names">scenario_names<a class="anchor" aria-label="anchor" href="#arg-scenario-names"></a></dt>
<dd><p>character vector with names that identify multiple
future climate scenarios.</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>Logical. Whether to suppress progress messages.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a list with elements: <code>spat_table</code> the results of the spatial
analysis, <code>range_poly_assess</code> the range polygon clipped to the
assessment area, and <code>range_poly_clim</code> the range polygon clipped to
the extent of the climate data.</p>
<p><code>spat_table</code> contains the following columns:</p><dl><dt>scenario_name</dt>
<dd><p>Name identifying the scenario</p></dd>

<dt>MAT_#</dt>
<dd><p>The percentage of the species' range that is exposed to each class of change in mean annual temperature between the historical normal and predicted climate. Class 1 has the highest exposure and Class 6 the lowest</p></dd>

<dt>CMD_#</dt>
<dd><p>The percentage of the species' range that is exposed to each class of change in climate moisture deficit between the historical normal and predicted climate. Class 1 has the highest exposure and Class 6 the lowest</p></dd>

<dt>CCEI_#</dt>
<dd><p>The percentage of the species' non-breeding range that falls into each climate change exposure index class. Class 4 indicates high exposure while Class 1 indicates low exposure</p></dd>

<dt>perc_non_breed_not_over_ccei</dt>
<dd><p>The precentage of the non-breeding range that does not overlap with the CCEI raster data</p></dd>

<dt>HTN_#</dt>
<dd><p>The percentage of the species' range that is exposed to each class of variation between the historical coldest and warmest monts. Class 1 has the smallest variation and Class 4 is the largest</p></dd>

<dt>PTN</dt>
<dd><p>The percentage of the species' range that falls into cool or cold environments that may be lost or reduced in the assessment area as a result of climate change</p></dd>

<dt>MAP_max/min</dt>
<dd><p>The maximum and minimum historical mean annual precipitation in the species' range</p></dd>

<dt>range_change</dt>
<dd><p>The projected decrease in range size as a percentage of current range size. Negative numbers indicate an increase in range size</p></dd>

<dt>range_overlap</dt>
<dd><p>The percentage of the current range that is projected to remain in the future range.</p></dd>

<dt>range_size</dt>
<dd><p>The area of the species' range in m2</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The range polygon will be clipped to the area overlapping the
<code>scale_poly</code> and also to the area overlapping the extent of the
climate data polygon. The range within the assessment area is used to
calculate all results except the historical thermal and hydrological niches
for which the range within the extent of the climate data is used.</p>
<p>The projections used will be that of the Mean Annual Temperature (in
<code>clim_vars_lst</code>), the CCEI (in <code>clim_vars_lst</code>, if used), and the
predicted changes in breeding range (<code>hs_rasts</code>; if used). Therefore these
spatial data files will ideally be projected with a projection appropriate
for preserving area in calculations (Equal Area projections, for example).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Setup</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Linking to GEOS 3.12.1, GDAL 3.8.4, PROJ 9.4.0; sf_use_s2() is TRUE</span>
<span class="r-in"><span><span class="va">base_pth</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"ccviR"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">scn_nms</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RCP 4.5"</span>, <span class="st">"RCP 8.5"</span><span class="op">)</span> <span class="co"># scenario names</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">clim_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_clim_vars.html">get_clim_vars</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">base_pth</span>, <span class="st">"clim_files/processed"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                           scenario_names <span class="op">=</span> <span class="va">scn_nms</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">spat_res</span> <span class="op">&lt;-</span> <span class="fu">analyze_spatial</span><span class="op">(</span></span></span>
<span class="r-in"><span>  range_poly <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">read_sf</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">base_pth</span>, <span class="st">"rng_poly.shp"</span><span class="op">)</span>, agr <span class="op">=</span> <span class="st">"constant"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  scale_poly <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">read_sf</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">base_pth</span>, <span class="st">"assess_poly.shp"</span><span class="op">)</span>, agr <span class="op">=</span> <span class="st">"constant"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  clim_vars_lst <span class="op">=</span> <span class="va">clim_vars</span>,</span></span>
<span class="r-in"><span>  hs_rast <span class="op">=</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">base_pth</span>, <span class="st">"rng_chg_45.tif"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                          <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">base_pth</span>, <span class="st">"rng_chg_85.tif"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  hs_rcl <span class="op">=</span> <span class="fu"><a href="rng_chg_mat.html">rng_chg_mat</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  scenario_names <span class="op">=</span> <span class="va">scn_nms</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Checking files</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Preparing polygon 'Climate Data Extext'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Preparing polygon 'Assessment Area'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Preparing polygon 'Range'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Clipping 'Range' to 'Climate Data Extent'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Clipping 'Range' to 'Assessment Area'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Assessing local climate exposure</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Assessing thermal &amp; hydrological niches</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Assessing modelled range response to climate change</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Finalizing outputs</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># With only one range change scenario (suboptimal)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">spat_res</span> <span class="op">&lt;-</span> <span class="fu">analyze_spatial</span><span class="op">(</span></span></span>
<span class="r-in"><span>  range_poly <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">read_sf</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">base_pth</span>, <span class="st">"rng_poly.shp"</span><span class="op">)</span>, agr <span class="op">=</span> <span class="st">"constant"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  scale_poly <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">read_sf</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">base_pth</span>, <span class="st">"assess_poly.shp"</span><span class="op">)</span>, agr <span class="op">=</span> <span class="st">"constant"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  clim_vars_lst <span class="op">=</span> <span class="va">clim_vars</span>,</span></span>
<span class="r-in"><span>  hs_rast <span class="op">=</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">base_pth</span>, <span class="st">"rng_chg_45.tif"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  hs_rcl <span class="op">=</span> <span class="fu"><a href="rng_chg_mat.html">rng_chg_mat</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  scenario_names <span class="op">=</span> <span class="va">scn_nms</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Checking files</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Preparing polygon 'Climate Data Extext'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Preparing polygon 'Assessment Area'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Preparing polygon 'Range'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Clipping 'Range' to 'Climate Data Extent'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Clipping 'Range' to 'Assessment Area'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Assessing local climate exposure</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Assessing thermal &amp; hydrological niches</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Assessing modelled range response to climate change</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Finalizing outputs</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># With protected areas</span></span></span>
<span class="r-in"><span><span class="va">spat_res</span> <span class="op">&lt;-</span> <span class="fu">analyze_spatial</span><span class="op">(</span></span></span>
<span class="r-in"><span>  range_poly <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">read_sf</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">base_pth</span>, <span class="st">"rng_poly.shp"</span><span class="op">)</span>, agr <span class="op">=</span> <span class="st">"constant"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  scale_poly <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">read_sf</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">base_pth</span>, <span class="st">"assess_poly.shp"</span><span class="op">)</span>, agr <span class="op">=</span> <span class="st">"constant"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  protected_poly <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">read_sf</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">base_pth</span>, <span class="st">"protected_areas.shp"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  clim_vars_lst <span class="op">=</span> <span class="va">clim_vars</span>,</span></span>
<span class="r-in"><span>  hs_rast <span class="op">=</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">base_pth</span>, <span class="st">"rng_chg_45.tif"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                          <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">base_pth</span>, <span class="st">"rng_chg_85.tif"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  hs_rcl <span class="op">=</span> <span class="fu"><a href="rng_chg_mat.html">rng_chg_mat</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  scenario_names <span class="op">=</span> <span class="va">scn_nms</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Checking files</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Preparing polygon 'Climate Data Extext'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Preparing polygon 'Assessment Area'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Preparing polygon 'Range'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Clipping 'Range' to 'Climate Data Extent'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Clipping 'Range' to 'Assessment Area'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Assessing local climate exposure</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Assessing thermal &amp; hydrological niches</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Assessing modelled range response to climate change</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Preparing polygon 'Protected Areas'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Clipping 'Protected Areas' to 'Assessment Area'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Transforming polygon 'Protected Areas'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Finalizing outputs</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># With CCEI (by supplying `non_breed.shp` spatial example)</span></span></span>
<span class="r-in"><span><span class="va">spat_res</span> <span class="op">&lt;-</span> <span class="fu">analyze_spatial</span><span class="op">(</span></span></span>
<span class="r-in"><span>  range_poly <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">read_sf</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">base_pth</span>, <span class="st">"rng_poly.shp"</span><span class="op">)</span>, agr <span class="op">=</span> <span class="st">"constant"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  scale_poly <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">read_sf</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">base_pth</span>, <span class="st">"assess_poly.shp"</span><span class="op">)</span>, agr <span class="op">=</span> <span class="st">"constant"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  protected_poly <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">read_sf</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">base_pth</span>, <span class="st">"protected_areas.shp"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  non_breed_poly <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">read_sf</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">base_pth</span>, <span class="st">"non_breed.shp"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  clim_vars_lst <span class="op">=</span> <span class="va">clim_vars</span>,</span></span>
<span class="r-in"><span>  hs_rast <span class="op">=</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">base_pth</span>, <span class="st">"rng_chg_45.tif"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                          <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">base_pth</span>, <span class="st">"rng_chg_85.tif"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  hs_rcl <span class="op">=</span> <span class="fu"><a href="rng_chg_mat.html">rng_chg_mat</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  scenario_names <span class="op">=</span> <span class="va">scn_nms</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Checking files</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Preparing polygon 'Climate Data Extext'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Preparing polygon 'Assessment Area'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Preparing polygon 'Range'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Preparing polygon 'non-breeding range'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Transforming polygon 'non-breeding range'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Clipping 'Range' to 'Climate Data Extent'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Clipping 'Range' to 'Assessment Area'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Assessing local climate exposure</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Assessing thermal &amp; hydrological niches</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Assessing modelled range response to climate change</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Preparing polygon 'Protected Areas'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Clipping 'Protected Areas' to 'Assessment Area'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Transforming polygon 'Protected Areas'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Finalizing outputs</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sarah Endicott, Ilona Naujokaitis-Lewis.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

