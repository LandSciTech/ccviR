[{"path":"https://landscitech.github.io/ccviR/articles/app_vignette.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Using the ccviR app","text":"ccviR app implements NatureServe Climate Change Vulnerability Index (CCVI) Shiny App. app allows geospatial aspects calculating CCVI done R, removing need separate GIS calculations. also includes new features enhanced user friendliness make easier calculate index explore results. NatureServe CCVI trait based climate change vulnerability assessment framework can also include observed modeled responses climate change. NatureServe CCVI includes three commonly used components vulnerability: exposure, sensitivity adaptive capacity optionally incorporates results documented modeled responses climate change. Exposure assessed determining proportion species range falls 6 classes temperature moisture change, used determine exposure multiplier. Sensitivity adaptive capacity responses climate change assessed scoring vulnerability factors (23 4 respectively), scale ‘neutral’ (0) ‘greatly increases vulnerability’ (3). Factors answered can left blank contribute 0 total score, fewer 13 scored index value can calculated. sensitivity adaptive capacity section scores multiplied exposure multiplier summed, scores response climate change section simply summed. index value determined section applying set thresholds scores. two index values combined using table gives weight sensitivity adaptive capacity section. possible index values Less Vulnerable, Moderately Vulnerable, Highly Vulnerable, Extremely Vulnerable Insufficient Evidence enough factors CCVI scored. detailed information index works factor scored see NatureServe CCVI Guidelines references .","code":""},{"path":"https://landscitech.github.io/ccviR/articles/app_vignette.html","id":"launching-the-app","dir":"Articles","previous_headings":"","what":"Launching the app","title":"Using the ccviR app","text":"app launched calling run_ccvi_app() function, launch app user’s default internet browser. file selection windows start current working directory. run app data stored different folder can call run_ccvi_app() folder path first argument. example data stored subdirectory named “data” RStudio project calling function call run_ccvi_app(\"data\") avoid open data folder every time select file. Alternatively, complete path data folder can supplied e.g. “C:/Users/username/Documents/path//folder” (Note paths R must supplied using forward slashes).","code":""},{"path":"https://landscitech.github.io/ccviR/articles/app_vignette.html","id":"run-a-demonstration","dir":"Articles","previous_headings":"","what":"Run a demonstration","title":"Using the ccviR app","text":"using app assess real species recommend walking app demo data set provided. Run code get started.","code":"library(ccviR) run_ccvi_app(\"demo\")"},{"path":"https://landscitech.github.io/ccviR/articles/app_vignette.html","id":"getting-started","dir":"Articles","previous_headings":"Run a demonstration","what":"Getting started","title":"Using the ccviR app","text":"Welcome Tab provides information Index data needed calculate .","code":""},{"path":"https://landscitech.github.io/ccviR/articles/app_vignette.html","id":"preparing-the-data","dir":"Articles","previous_headings":"Run a demonstration","what":"Preparing the data","title":"Using the ccviR app","text":"first time use app need prepare climate data used calculate index. start process example climate data clicking Prepare Climate Data button. opens new tab. case don’t need download data using demo data. raw climate data set includes mean annual temperature (MAT) climate moisture deficit (CMD) historical future time periods mean annual precipitation (MAP) minimum coldest warmest month temperatures (MCMT MWMT) historical time period. addition, climate change exposure index (CCEI) South/Central America provided NatureServe also included. app use raw climate data create classified versions climate data used calculate index save selected folder. Start selecting folder location raw climate data. file selector window expand “clim_files” folder clicking arrow select “raw” folder. Note names files right hand side, download real climate data need re-name files match naming structure select files individually. Click “Select” close window. output folder, time selecting “processed” folder. Check “existing files output folder overwritten?” box. click “Process”. loading symbol appear finished message saying “Processing complete” appear. take longer real climate data covers North America need wait finished moving . done click “Finished” go back Welcome page. next time use app can go straight onto Step 1 without preparing climate data stored computer output folder selected. real species need think acquire data described Steps 1 2 Welcome page demonstration go ahead press “Start” begin calculating index.","code":""},{"path":"https://landscitech.github.io/ccviR/articles/app_vignette.html","id":"species-information","dir":"Articles","previous_headings":"Run a demonstration","what":"Species information","title":"Using the ccviR app","text":"page provide basic details species. Make sure select appropriate taxonomic group since aspects index conditional . demonstration select “Bird”. See NatureServe Guidelines better understand meaning two check boxes end. demonstration check box migratory species. Click “Next”.","code":""},{"path":"https://landscitech.github.io/ccviR/articles/app_vignette.html","id":"spatial-data-analysis","dir":"Articles","previous_headings":"Run a demonstration","what":"Spatial data analysis","title":"Using the ccviR app","text":"tab load spatial data used index see results spatial analysis exposure climate change. Select folder location climate data prepared previous step ie “clim_files > processed”. select range polygon species selecting file “rng_poly_high.shp”. Select assessment area selecting “assess_poly.shp” file. Select “nonbreed_poly.shp” non-breeding range. Select “PTN_poly.shp” physiological thermal niche. finally, select “HS_rast_high.tif” projected habitat change raster. New inputs show specify raster classified lost, gained, maintained suitable habitat. example use default values, raster lost 1, maintained 2-6, gained 7 0 suitable. Note wanted ignore gains set gain multiplier 0 leave 1 assume model already accounted whether habitat gains likely realized. click “Run”. loading symbol appear data processed. interactive maps climate change exposure displayed. real climate data cover North America. exposure maps classified 6 classes proportion species range class displayed table. exposure multiplier determined level exposure used modify sensitivity adaptive capacity components index based exposure climate change. similar analysis done non-breeding range species, see NatureServe guidelines full description migratory exposure index calculated. finished exploring maps click “Next”.","code":""},{"path":"https://landscitech.github.io/ccviR/articles/app_vignette.html","id":"vulnerability-questions","dir":"Articles","previous_headings":"Run a demonstration","what":"Vulnerability questions","title":"Using the ccviR app","text":"Vulnerability questions detailed questions index uses score species’ indirect exposure, sensitivity, adaptive capacity modeled documented responses climate change. Descriptions interpret score questions available NatureServe guidelines included pop-click “Show guidelines” button. vulnerability questions answered based analysis spatial data questions dealt next tab. demonstration can select check box want question, try different versions see affects result! Click “Next” go next tab","code":""},{"path":"https://landscitech.github.io/ccviR/articles/app_vignette.html","id":"spatial-vulnerability-questions","dir":"Articles","previous_headings":"Run a demonstration","what":"Spatial Vulnerability Questions","title":"Using the ccviR app","text":"tab includes vulnerability questions spatial component. question includes map table showing data summarized. check box pre-selected based spatial data analysis can changed needed. Note check box changed Run button Spatial Analysis page clicked see warning value check boxes page updated value based re-run spatial analysis. comments affected though can explain reason adjustments comments remake adjustments still applicable. demonstration leave check boxes click “Next”.","code":""},{"path":"https://landscitech.github.io/ccviR/articles/app_vignette.html","id":"results","dir":"Articles","previous_headings":"Run a demonstration","what":"Results","title":"Using the ccviR app","text":"Results page click Calculate calculate index value. loaded page gives resulting index value tables graphs explain index value determined. explained app. finished reviewing results can save data csv file. go back change answer vulnerability question need click Calculate button see updated results.","code":""},{"path":"https://landscitech.github.io/ccviR/articles/app_vignette.html","id":"saving-the-app","dir":"Articles","previous_headings":"Run a demonstration","what":"Saving the app","title":"Using the ccviR app","text":"state app can saved clicking save button bottom Results page. pop appear asks pick location name folder store app data. sure save easy remember need find load saved app. folder name must letters numbers spaces. create folder given name containing two .rds files store values. save information entered app save results app loaded saved file re-run calculations. addition, path spatial data stored data app able load data moved name changed. data moved get error message can go back Spatial Analysis tab select new file location press Run re-run spatial analysis keep answers non-spatial vulnerability questions saved file.","code":""},{"path":"https://landscitech.github.io/ccviR/articles/app_vignette.html","id":"troubleshooting","dir":"Articles","previous_headings":"","what":"Troubleshooting","title":"Using the ccviR app","text":"problem app can look output R console clue going wrong. output include messages, warnings error messages produced. can ignore warnings unless something else gone wrong. errors show app situations app go grey error message can found R console. persistent problems app can analysis using ccviR package. often able figure causing problem return app. See vignette(\"package_vignette\", package = \"ccviR\") tutorial use package.","code":""},{"path":"https://landscitech.github.io/ccviR/articles/app_vignette.html","id":"references","dir":"Articles","previous_headings":"","what":"References","title":"Using the ccviR app","text":"Young, B. E., K. R. Hall, E. Byers, K. Gravuer, G. Hammerson, . Redder, K. Szabo. 2012. Rapid assessment plant animal vulnerability climate change. Pages 129-150 Wildlife Conservation Changing Climate, edited J. Brodie, E. Post, D. Doak. University Chicago Press, Chicago, IL. https://doi.org/10.7208/9780226074641-007 Young, B. E., N. S. Dubois, E. L. Rowland. 2015. Using Climate Change Vulnerability Index inform adaptation planning: lessons, innovations, next steps. Wildlife Society Bulletin 39:174-181.","code":""},{"path":"https://landscitech.github.io/ccviR/articles/package_vignette.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Using the ccviR package","text":"ccviR package implements NatureServe Climate Change Vulnerability Index (CCVI) R package Shiny App. package allows geospatial aspects calculating CCVI done R, removing need separate GIS calculations. also enables easier sensitivity analysis Index. NatureServe CCVI trait based climate change vulnerability assessment framework can also include observed modeled responses climate change. NatureServe CCVI includes three commonly used components vulnerability: exposure, sensitivity adaptive capacity optionally incorporates results documented modeled responses climate change. Exposure assessed determining proportion species range falls 6 classes temperature moisture change, used determine exposure multiplier. Sensitivity adaptive capacity responses climate change assessed scoring vulnerability factors (23 4 respectively), scale ‘neutral’ (0) ‘greatly increases vulnerability’ (3). Factors answered can left blank contribute 0 total score, fewer 13 scored index value can calculated. sensitivity adaptive capacity section scores multiplied exposure multiplier summed, scores response climate change section simply summed. index value determined section applying set thresholds scores. two index values combined using table gives weight sensitivity adaptive capacity section. possible index values Less Vulnerable, Moderately Vulnerable, Highly Vulnerable, Extremely Vulnerable Insufficient Evidence enough factors CCVI scored. detailed information index works factor scored see NatureServe CCVI Guidelines references .","code":""},{"path":"https://landscitech.github.io/ccviR/articles/package_vignette.html","id":"preparing-the-climate-data","dir":"Articles","previous_headings":"","what":"Preparing the climate data","title":"Using the ccviR package","text":"Step 1: Acquire climate data. recommend climate data North America AdaptWest data set includes least mean annual temperature climate moisture deficit (similar moisture metric) can used. AdaptWest select bioclimatic variables normal period desired future climate scenario. recommend using 1961-1990 normal period ensemble data SSP2-4.5 2050s future. Save downloaded data folder can easily find. Step 2: Prepare climate data use app. Climate data can processed providing file paths file folder contains files standard names. output folder make sure choose location easy find use prepared climate data calculate index. Standard names input folder MAT: mean annual temperature historical normal period (required) MAT_2050: mean annual temperature future climate change. can number eg 2050, 2100 (required) CMD: climate moisture deficit historical normal period (required) CMD_2050: climate moisture deficit future climate change can number eg 2050, 2100 (required) CCEI: Climate Change Exposure Index NatureServe website MAP: mean annual precipitation historical normal period MWMT: mean warmest month temperature historical normal period MCMT: mean coldest month temperature historical normal period clim_poly: optional shapefile polygon extent climate data. created climate data missing faster provide . Accepted raster file types “.asc”, “.tif”, “.nc”, “.grd” “.img” example data set provided app use examples . prepared data saved output folder can used whenever index calculated step needs completed . thresholds classifying data based provided NatureServe Guidelines except thresholds used exposure data. Since using different climate data thresholds classes need calculated. use median 1/2 interquartile range since appropriate skewed data mean standard deviation used NatureServe. demonstrate data prepared maps use demo data set show change mean annual temperature classified 6 categories.","code":"library(ccviR) library(raster) #> Loading required package: sp library(sf) #> Linking to GEOS 3.8.0, GDAL 3.0.4, PROJ 6.3.1; sf_use_s2() is TRUE  data_pth <- system.file(\"extdata\", package = \"ccviR\")  # check that file names match expected list.files(file.path(data_pth, \"clim_files/raw\")) #> [1] \"CCEI.img\"         \"CCEI.img.aux.xml\" \"CMD_2050.tif\"     \"CMD.tif\"          #> [5] \"MAP.tif\"          \"MAT_2050.tif\"     \"MAT.tif\"          \"MCMT.tif\"         #> [9] \"MWMT.tif\"  # prepare the data and save it in out_folder run_prep_data(in_folder = file.path(data_pth, \"clim_files/raw\"),                out_folder = file.path(data_pth, \"clim_files/processed\"),               overwrite = TRUE) #> processing MAT #> processing CMD #> processing CCEI #> processing MAP #> processing MWMT and MCMT #> creating clim_poly from raster data #> finished processing #> [1] \"\" mat_norm <- raster(file.path(data_pth, \"clim_files/raw/MAT.tif\")) mat_fut <- raster(file.path(data_pth, \"clim_files/raw/MAT_2050.tif\"))  mat_classified <- raster(file.path(data_pth, \"clim_files/processed/MAT_reclass.tif\"))  plot(mat_norm - mat_fut) plot(mat_classified)"},{"path":"https://landscitech.github.io/ccviR/articles/package_vignette.html","id":"load-species-specific-spatial-data","dir":"Articles","previous_headings":"","what":"Load species specific spatial data","title":"Using the ccviR package","text":"following spatial data sets can used species: Species range polygon (required) Assessment area polygon (required) Non-breeding range polygon Projected habitat change raster matrix reclassify 0 = unsuitable, 1 = lost, 2 = maintained 3 = gained Physiological thermal niche (PTN) polygon. PTN polygon include cool cold environments species occupies may lost reduced assessment area result climate change. example data provided package.","code":"rng_poly_high <- read_sf(file.path(data_pth, \"rng_poly_high.shp\"), agr = \"constant\") assess_poly <- read_sf(file.path(data_pth, \"assess_poly.shp\"), agr = \"constant\") HS_rast_high <- raster(file.path(data_pth, \"HS_rast_high.tif\")) PTN_poly <- read_sf(file.path(data_pth, \"PTN_poly.shp\"), agr = \"constant\") nonbreed_poly <- read_sf(file.path(data_pth, \"nonbreed_poly.shp\"), agr = \"constant\")  # the habitat change raster has values from 0 to 7, this matrix is used to # convert them to the 4 classes described above. hs_rcl_mat <- matrix(c(c(0:7), c(0, 1, 2,2,2,2,2,3)), ncol = 2)"},{"path":"https://landscitech.github.io/ccviR/articles/package_vignette.html","id":"load-climate-data-and-run-spatial-analysis","dir":"Articles","previous_headings":"","what":"Load climate data and run spatial analysis","title":"Using the ccviR package","text":"Next load climate data prepared first step using get_clim_vars() function loads data stores list required names. can run spatial data analysis using species specific data climate data. resulting object list containing table results spatial analysis, spat_res$spat_table, two range polygons provided mapping. spat_res$range_poly_assess range polygon clipped assessment area, spat_res$range_poly_clim range polygon clipped extent climate data. first used factors except historical thermal hydrological niche use range clipped extent climate data historical thermal hydrological niche used proxies range temperature moisture conditions species can tolerate therefore reflect much range possible. range_poly provided completely within assessment area two polygons can look spatial analysis done plotting appropriate range polygon climate data see overlap.  inspecting spatial results table. case shows 10% range highest exposure change mean annual temperature class 90% second highest.","code":"clim_dat <- get_clim_vars(file.path(data_pth, \"clim_files/processed\")) spat_res <- run_spatial(range_poly = rng_poly_high, scale_poly = assess_poly,                         ptn_poly = PTN_poly, non_breed_poly = nonbreed_poly,                         hs_rast = HS_rast_high,                         hs_rcl = hs_rcl_mat,                         clim_vars_lst = clim_dat) #> performing spatial analysis plot(clim_dat$mat)  plot(st_geometry(spat_res$range_poly_assess), add = TRUE) spat_res$spat_table[, 1:6] #> # A tibble: 1 × 6 #>   MAT_1 MAT_2 MAT_3 MAT_4 MAT_5 MAT_6 #>   <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> #> 1    10    90     0     0     0     0"},{"path":"https://landscitech.github.io/ccviR/articles/package_vignette.html","id":"answer-the-vulnerability-questions","dir":"Articles","previous_headings":"","what":"Answer the vulnerability questions","title":"Using the ccviR package","text":"make_vuln_df() creates blank table can filled scores vulnerability factor used calculate index. vulnerability factors score explained NatureServe Guidelines. table includes abbreviated version question, maximum value factor whether factor calculated spatial data analysis (scored -1 override results spatial analysis). Value1 filled number -1 maximum value question (2 3) correspond following impacts vulnerability -1: Unknown, 0: Neutral, 1: Somewhat Increase, 2: Increase, 3: Greatly Increase. wish choose two answers reflect uncertainty can fill Value2 - Value4 well.","code":"vuln <- make_vuln_df(\"sp_name\")  if(FALSE){   # you can interactively edit the table   vuln <- edit(vuln)      # # Another option:   #    # # save the table as a csv    #    # write.csv(vuln, \"path/to/write\", row.names = FALSE)   #    # # Edit the csv, save it and load it back in to R   # vuln <- read.csv(\"path/to/write\", stringsAsFactors = FALSE) } else {   # or use code (recommended for reproducibility)   vuln$Value1[3:19] <- c( 0,0,1,0, -1, -1, -1, -1, 0, 1, 1, 0, 0, 1, 0, 0, 1)   vuln$Value1[26:29] <- c(0, -1, -1, 0)      # include a second value to reflect uncertainty and trigger a monte carlo to   # determine confidence   vuln$Value2[3] <- 2 }"},{"path":"https://landscitech.github.io/ccviR/articles/package_vignette.html","id":"calculate-the-index","dir":"Articles","previous_headings":"","what":"Calculate the index","title":"Using the ccviR package","text":"Finally, combine results spatial analysis answers vulnerability questions calculate index. example reduced number rounds Monte Carlo generally kept default. result list 11 elements see ?calc_vulnerability explanation . index_res$index gives index EV: Extremely Vulnerable, HV: Highly Vulnerable, MV: Moderately Vulnerable, LV: Less Vulnerable, IE: Insufficient Evidence. see example species Highly Vulnerable climate change results can used investigate index value reached including using two graphs included package. first shows index values, calculated separately modeled response climate change sensitivity adaptive capacity modified exposure sections, combined overall index value. also shows thresholds converting numerical scores factor categorical index value. example can see index value driven primarily sensitivity section since score section produced index value Extremely Vulnerable D score higher included (-1 graph).  second graph visual representation scores factor impacted exposure. bars show total score factor dots show exposure multiplier used modify initial value.","code":"index_res <- calc_vulnerability(spat_res$spat_table, vuln, tax_grp = \"Bird\",                                 n_rnds = 10) #> calculating vulnerability index #> performing monte carlo #> finished vulnerability str(index_res) #> List of 11 #>  $ index      : chr \"HV\" #>  $ conf_index : chr \"Very High\" #>  $ index_conf :'data.frame': 5 obs. of  2 variables: #>   ..$ index    : chr [1:5] \"EV\" \"HV\" \"MV\" \"LV\" ... #>   ..$ frequency: num [1:5] 0 1 0 0 0 #>  $ mig_exp    : chr \"N/A\" #>  $ d_score    : num 2 #>  $ b_c_score  : num 25.2 #>  $ vuln_df    : tibble [29 × 12] (S3: tbl_df/tbl/data.frame) #>   ..$ Species   : chr [1:29] \"sp_name\" \"sp_name\" \"sp_name\" \"sp_name\" ... #>   ..$ Code      : chr [1:29] \"Z2\" \"Z3\" \"B1\" \"B2a\" ... #>   ..$ Question  : chr [1:29] \"Is the species an obligate of caves or groundwater systems\" \"Is the species migratory\" \"Exposure to sea level rise\" \"Natural barriers\" ... #>   ..$ Max_Value : chr [1:29] NA NA \"3\" \"3\" ... #>   ..$ is_spatial: chr [1:29] NA NA \"0\" \"0\" ... #>   ..$ Value1    : num [1:29] -1 -1 0 0 1 0 -1 0 1 1 ... #>   ..$ Value2    : num [1:29] NA NA 2 NA NA NA NA NA NA NA ... #>   ..$ Value3    : logi [1:29] NA NA NA NA NA NA ... #>   ..$ Value4    : logi [1:29] NA NA NA NA NA NA ... #>   ..$ N         : int [1:29] 1 1 1 1 1 1 1 1 1 1 ... #>   ..$ exp       : num [1:29] NA NA 1 1.83 1.83 ... #>   ..$ score     : num [1:29] NA NA 1 0 1.83 ... #>  $ n_b_factors: int 4 #>  $ n_c_factors: int 11 #>  $ n_d_factors: int 4 #>  $ slr_vuln   : logi FALSE  index_res$index #> [1] \"HV\" plot_score_index(index_res$b_c_score, index_res$d_score, index_res$n_d_factors) plot_q_score(index_res$vuln_df)"},{"path":"https://landscitech.github.io/ccviR/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Sarah Endicott. Author, maintainer. Majesty Queen Right Canada, represented Minister Environment Climate Change. Copyright holder.","code":""},{"path":"https://landscitech.github.io/ccviR/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Endicott S (2022). ccviR: Calculate NatureServe Climate Change Vulnerability Index R. https://github.com/see24/ccviR, https://landscitech.github.io/ccviR/.","code":"@Manual{,   title = {ccviR: Calculate the NatureServe Climate Change Vulnerability Index in R},   author = {Sarah Endicott},   year = {2022},   note = {https://github.com/see24/ccviR, https://landscitech.github.io/ccviR/}, }"},{"path":"https://landscitech.github.io/ccviR/index.html","id":"ccvir","dir":"","previous_headings":"","what":"Calculate the NatureServe Climate Change Vulnerability Index in R","title":"Calculate the NatureServe Climate Change Vulnerability Index in R","text":"application/package active development ccviR package implements NatureServe Climate Change Vulnerability Index (CCVI) version 3.02 R package Shiny App. package allows geospatial aspects calculating CCVI done R, removing need separate GIS calculations. app provides interactive application designed offer user-friendly simple interface calculating NatureServe CCVI. See Young et. al (2012) Young et. al. (2015) detailed description index.","code":""},{"path":"https://landscitech.github.io/ccviR/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Calculate the NatureServe Climate Change Vulnerability Index in R","text":"can install development version ccviR GitHub : clicking “Latest Release” right-side menu GitHub repository, downloading .zip file containing package installing dependencies :","code":"# install.packages(\"devtools\") devtools::install_github(\"see24/ccviR\") install.packages(c('dplyr', 'raster', 'sf', 'purrr', 'tidyr', 'shiny', 'stringr',                     'units', 'exactextractr', 'shinyFiles', 'shinyjs', 'tmap',                      'ggplot2', 'shinycssloaders', 'R.utils', 'fs', 'plotly',                     'rgdal', 'scales', 'shinyvalidate'))  install.packages(\"path/to/zip/file\", repos = NULL)"},{"path":"https://landscitech.github.io/ccviR/index.html","id":"launching-the-app","dir":"","previous_headings":"","what":"Launching the app","title":"Calculate the NatureServe Climate Change Vulnerability Index in R","text":"code open app default browser example data set available. following open app current working directory default data location.","code":"library(ccviR) run_ccvi_app(\"demo\") run_ccvi_app()"},{"path":"https://landscitech.github.io/ccviR/index.html","id":"additional-help","dir":"","previous_headings":"","what":"Additional Help","title":"Calculate the NatureServe Climate Change Vulnerability Index in R","text":"See vignette(\"app_vignette\", package = \"ccviR\") detailed description use app vignette(\"package_vignette\", package = \"ccviR\") tutorial use package calculate index directly R.","code":""},{"path":"https://landscitech.github.io/ccviR/reference/calc_vulnerability.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate the vulnerability index score — calc_vulnerability","title":"Calculate the vulnerability index score — calc_vulnerability","text":"Calculate vulnerability index score completed inputs.","code":""},{"path":"https://landscitech.github.io/ccviR/reference/calc_vulnerability.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate the vulnerability index score — calc_vulnerability","text":"","code":"calc_vulnerability(spat_df, vuln_df, tax_grp, n_rnds = 1000)"},{"path":"https://landscitech.github.io/ccviR/reference/calc_vulnerability.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate the vulnerability index score — calc_vulnerability","text":"spat_df data.frame spatial inputs produced run_spatial vuln_df data.frame answers vulnerability questions. format must match make_vuln_df. tax_grp taxonomic group species. Must match one options n_rnds number monte carlo repetitions determining variability multiple values given factor","code":""},{"path":"https://landscitech.github.io/ccviR/reference/calc_vulnerability.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate the vulnerability index score — calc_vulnerability","text":"list: index index value string. EV: Extremely Vulnerable,   HV: Highly Vulnerable, MV: Moderately Vulnerable, LV: Less Vulnerable,   IE: Insufficient Evidence conf_index index confidence index based   monte carlo. Options Low, Moderate, High, High Insufficient Evidence. index_conf data.frame proportion monte carlo runs index value mig_exp index migratory exposure. Options Low, Moderate, High, \"N/\" d_score Total score section D modelled response climate change section b_c_score Total score sections B C indirect exposure, sensitivity adaptive capacity sections vuln_df Answers question plus comments. Numerical scores correspond :    -1) Unknown, 0) Neutral, 1) Somewhat increase, 2) Increase, 3) Greatly increase.    2 numbers two boxes checked average scores    used total score n_b_factors Number factors scored section B n_c_factors Number factors scored section C n_d_factors Number factors scored section D slr_vuln Whether species' vulnerability sea level rise dispersal limitations led index EV","code":""},{"path":"https://landscitech.github.io/ccviR/reference/calc_vulnerability.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate the vulnerability index score — calc_vulnerability","text":"Options tax_grp Vascular Plant, Nonvascular Plant, Lichen, Invert-Insect, Invert-Mollusk, Invert-, Fish, Amphibian, Reptile, Mammal, Bird","code":""},{"path":"https://landscitech.github.io/ccviR/reference/calc_vulnerability.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate the vulnerability index score — calc_vulnerability","text":"","code":"base_pth <- system.file(\"extData\", package = \"ccviR\")  clim_vars <- get_clim_vars(file.path(base_pth, \"clim_files/processed\")) #> Error: directory /clim_files/processed does not exist  spat_res <- run_spatial(   range_poly = sf::read_sf(file.path(base_pth, \"rng_poly_high.shp\"), agr = \"constant\"),   scale_poly = sf::read_sf(file.path(base_pth, \"assess_poly.shp\"), agr = \"constant\"),   clim_vars_lst = clim_vars,   hs_rast = raster::raster(file.path(base_pth, \"HS_rast_high.tif\")),   hs_rcl = matrix(c(0:7, 0, 1, 2, 2 ,2, 2, 2, 3), ncol = 2) ) #> performing spatial analysis #> Error in setdiff(names(clim_vars_lst), c(\"mat\", \"cmd\", \"map\", \"ccei\",     \"htn\", \"clim_poly\")): object 'clim_vars' not found  # vulnerability factor table with score 1 (somewhat increase vulnerability) # for all factors vuln <- make_vuln_df(\"test_species\", val1 = 1, mig = 1)  calc_vulnerability(spat_res$spat_table, vuln, \"Bird\") #> calculating vulnerability index #> Error in as.vector(y): object 'spat_res' not found"},{"path":"https://landscitech.github.io/ccviR/reference/ccviR-package.html","id":null,"dir":"Reference","previous_headings":"","what":"ccviR: Calculate the NatureServe Climate Change Vulnerability Index in R — ccviR-package","title":"ccviR: Calculate the NatureServe Climate Change Vulnerability Index in R — ccviR-package","text":"ccviR package implements NatureServe Climate Change Vulnerability Index (CCVI) version 3.02 <https://www.natureserve.org/conservation-tools/climate-change-vulnerability-index> R package Shiny App. package allows geospatial aspects calculating CCVI done R, removing need separate GIS calculations. also enables easier sensitivity analysis Index. app provides interactive application designed offer user-friendly simple interface calculating NatureServe CCVI. See Young et. al (2012) <doi:10.7208/9780226074641-007> Young et. al. (2015) <doi:10.1002/wsb.478> detailed description index.","code":""},{"path":[]},{"path":"https://landscitech.github.io/ccviR/reference/ccviR-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"ccviR: Calculate the NatureServe Climate Change Vulnerability Index in R — ccviR-package","text":"Maintainer: Sarah Endicott sarah.endicott@canada.ca (ORCID) contributors: Majesty Queen Right Canada, represented Minister Environment Climate Change [copyright holder]","code":""},{"path":"https://landscitech.github.io/ccviR/reference/comb_index_tbl.html","id":null,"dir":"Reference","previous_headings":"","what":"Combined index lookup table — comb_index_tbl","title":"Combined index lookup table — comb_index_tbl","text":"table combining index scores sensitivity (B/C) modelled response climate change (D) sections","code":""},{"path":"https://landscitech.github.io/ccviR/reference/comb_index_tbl.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Combined index lookup table — comb_index_tbl","text":"","code":"comb_index_tbl"},{"path":"https://landscitech.github.io/ccviR/reference/comb_index_tbl.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Combined index lookup table — comb_index_tbl","text":"object class data.frame 5 rows 6 columns.","code":""},{"path":"https://landscitech.github.io/ccviR/reference/get_clim_vars.html","id":null,"dir":"Reference","previous_headings":"","what":"Load climate variables — get_clim_vars","title":"Load climate variables — get_clim_vars","text":"Load climate variables store list can used run_spatial. climate variables first prepared using run_prep_data.","code":""},{"path":"https://landscitech.github.io/ccviR/reference/get_clim_vars.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load climate variables — get_clim_vars","text":"","code":"get_clim_vars(root_pth)"},{"path":"https://landscitech.github.io/ccviR/reference/get_clim_vars.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load climate variables — get_clim_vars","text":"root_pth folder location climate data stored. names must match one c(\"MAT.*tif$\", \"CMD.*tif$\", \"clim_poly.*shp\", \"MAP.*tif$\", \"ccei.*tif$|CCEI.*tif$\",\"MWMT.*tif$|HTN.*tif$\") first three required.","code":""},{"path":"https://landscitech.github.io/ccviR/reference/get_clim_vars.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load climate variables — get_clim_vars","text":"list climate variables names \"mat\", \"cmd\", \"map\", \"ccei\",   \"htn\", \"clim_poly\"","code":""},{"path":"https://landscitech.github.io/ccviR/reference/get_clim_vars.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load climate variables — get_clim_vars","text":"","code":"pth <- system.file(\"extData/clim_files/processed\", package = \"ccviR\")  get_clim_vars(pth) #> Error: directory  does not exist"},{"path":"https://landscitech.github.io/ccviR/reference/make_vuln_df.html","id":null,"dir":"Reference","previous_headings":"","what":"Make vulnerability table — make_vuln_df","title":"Make vulnerability table — make_vuln_df","text":"Make empty vulnerability factor table can filled appropriate value vulnerability factor. Code corresponds questions NatureServe Guidelines Question abbreviated version question. See NatureServe Guidelines detailed instructions score species. Values can -1: Unknown, 0: Neutral, 1: Somewhat Increase, 2: Increase, 3: Greatly Increase.","code":""},{"path":"https://landscitech.github.io/ccviR/reference/make_vuln_df.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Make vulnerability table — make_vuln_df","text":"","code":"make_vuln_df(   sp_nm,   val1 = -1,   val2 = NA,   val3 = NA,   val4 = NA,   cave = 0,   mig = 0,   use_spatial = TRUE )"},{"path":"https://landscitech.github.io/ccviR/reference/make_vuln_df.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make vulnerability table — make_vuln_df","text":"sp_nm Species name val1 single number fill first column . default -1 Unknown used cases. val2, val3, val4 Additional values. Use default NA cave 0 1 whether species cave ground water dependent. See Guidelines. mig 0 1 species migratory? use_spatial TRUE values factors calculated run_spatial set -1 Unknown override results spatial analysis","code":""},{"path":"https://landscitech.github.io/ccviR/reference/make_vuln_df.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Make vulnerability table — make_vuln_df","text":"data.frame can edited used input vuln_df  calc_vulnerability","code":""},{"path":"https://landscitech.github.io/ccviR/reference/make_vuln_df.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Make vulnerability table — make_vuln_df","text":"","code":"make_vuln_df(\"sfa\", cave = 1, mig = 0) #>    Species  Code #> 1      sfa    Z2 #> 2      sfa    Z3 #> 3      sfa    B1 #> 4      sfa   B2a #> 5      sfa   B2b #> 6      sfa    B3 #> 7      sfa    C1 #> 8      sfa  C2ai #> 9      sfa C2aii #> 10     sfa  C2bi #> 11     sfa C2bii #> 12     sfa   C2c #> 13     sfa   C2d #> 14     sfa    C3 #> 15     sfa   C4a #> 16     sfa   C4b #> 17     sfa   C4c #> 18     sfa   C4d #> 19     sfa   C4e #> 20     sfa   C4f #> 21     sfa   C4g #> 22     sfa   C5a #> 23     sfa   C5b #> 24     sfa   C5c #> 25     sfa    C6 #> 26     sfa    D1 #> 27     sfa    D2 #> 28     sfa    D3 #> 29     sfa    D4 #>                                                                                  Question #> 1                              Is the species an obligate of caves or groundwater systems #> 2                                                                Is the species migratory #> 3                                                              Exposure to sea level rise #> 4                                                                        Natural barriers #> 5                                                                  Anthropogenic barriers #> 6   Predicted impact of land use changes resulting from human responses to climate change #> 7                                                                 Dispersal and movements #> 8                                                                Historical thermal niche #> 9                                                             Physiological thermal niche #> 10                                                          Historical hydrological niche #> 11                                                       Physiological hydrological niche #> 12    Dependence on a specific disturbance regime likely to be impacted by climate change #> 13                                    Dependence on ice, ice-edge, or snow-cover habitats #> 14                   Restriction to uncommon landscape/geological features or derivatives #> 15                               Dependence on other species to generate required habitat #> 16                                                     Dietary versatility (animals only) #> 17                                                   Pollinator versatility (plants only) #> 18                                    Dependence on other species for propagule dispersal #> 19                                            Sensitivity to pathogens or natural enemies #> 20                           Sensitivity to competition from native or non-native species #> 21                         Forms part of an interspecific interaction not covered by 5a-f #> 22                                                             Measured genetic variation #> 23 Occurrence of bottlenecks in recent evolutionary history (use only if 5a is \"unknown\") #> 24               Reproductive system (plants only; use only if c5a and c5b are “unknown”) #> 25      Phenological response to changing seasonal temperature and precipitation dynamics #> 26                                           Documented response to recent climate change #> 27                               Modeled future (2050) change in population or range size #> 28                              Overlap of modeled future (2050) range with current range #> 29                    Occurrence of protected areas in modeled future (2050) distribution #>    Max_Value is_spatial Value1 Value2 Value3 Value4 #> 1       <NA>       <NA>      1     NA     NA     NA #> 2       <NA>       <NA>      0     NA     NA     NA #> 3          3          0     -1     NA     NA     NA #> 4          3          0     -1     NA     NA     NA #> 5          3          0     -1     NA     NA     NA #> 6          2          0     -1     NA     NA     NA #> 7          3          0     -1     NA     NA     NA #> 8          3          1     -1     NA     NA     NA #> 9          3          1     -1     NA     NA     NA #> 10         3          1     -1     NA     NA     NA #> 11         3          0     -1     NA     NA     NA #> 12         2          0     -1     NA     NA     NA #> 13         3          0     -1     NA     NA     NA #> 14         2          0     -1     NA     NA     NA #> 15         2          0     -1     NA     NA     NA #> 16         2          0     -1     NA     NA     NA #> 17         2          0     -1     NA     NA     NA #> 18         2          0     -1     NA     NA     NA #> 19         2          0     -1     NA     NA     NA #> 20         2          0     -1     NA     NA     NA #> 21         2          0     -1     NA     NA     NA #> 22         2          0     -1     NA     NA     NA #> 23         2          0     -1     NA     NA     NA #> 24         2          0     -1     NA     NA     NA #> 25         2          0     -1     NA     NA     NA #> 26         3          0     -1     NA     NA     NA #> 27         3          1     -1     NA     NA     NA #> 28         3          1     -1     NA     NA     NA #> 29         2          0     -1     NA     NA     NA"},{"path":"https://landscitech.github.io/ccviR/reference/plot_q_score.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot scores for each vulnerability question — plot_q_score","title":"Plot scores for each vulnerability question — plot_q_score","text":"graph help visualize factors influencing index. Produces plotly graphic bars total score factor modifying based exposure dots exposure multiplier. Hover see name factor.","code":""},{"path":"https://landscitech.github.io/ccviR/reference/plot_q_score.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot scores for each vulnerability question — plot_q_score","text":"","code":"plot_q_score(vuln_df)"},{"path":"https://landscitech.github.io/ccviR/reference/plot_q_score.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot scores for each vulnerability question — plot_q_score","text":"vuln_df vuln_df element result calc_vulnerability.","code":""},{"path":"https://landscitech.github.io/ccviR/reference/plot_q_score.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot scores for each vulnerability question — plot_q_score","text":"plotly graph","code":""},{"path":"https://landscitech.github.io/ccviR/reference/plot_q_score.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot scores for each vulnerability question — plot_q_score","text":"","code":"base_pth <- system.file(\"extData\", package = \"ccviR\")  clim_vars <- get_clim_vars(file.path(base_pth, \"clim_files/processed\")) #> Error: directory /clim_files/processed does not exist  spat_res <- run_spatial(   range_poly = sf::read_sf(file.path(base_pth, \"rng_poly_high.shp\"), agr = \"constant\"),   scale_poly = sf::read_sf(file.path(base_pth, \"assess_poly.shp\"), agr = \"constant\"),   clim_vars_lst = clim_vars,   hs_rast = raster::raster(file.path(base_pth, \"HS_rast_high.tif\")),   hs_rcl = matrix(c(0:7, 0, 1, 2, 2 ,2, 2, 2, 3), ncol = 2) ) #> performing spatial analysis #> Error in setdiff(names(clim_vars_lst), c(\"mat\", \"cmd\", \"map\", \"ccei\",     \"htn\", \"clim_poly\")): object 'clim_vars' not found  # vulnerability factor table with score 1 (somewhat increase vulnerability) # for all factors vuln <- make_vuln_df(\"test_species\", val1 = 1, mig = 1)  index_vuln <- calc_vulnerability(spat_res$spat_table, vuln, \"Bird\") #> calculating vulnerability index #> Error in as.vector(y): object 'spat_res' not found  plot_q_score(index_vuln$vuln_df) #> Error in \"Question\" %in% names(vuln_df): object 'index_vuln' not found"},{"path":"https://landscitech.github.io/ccviR/reference/plot_score_index.html","id":null,"dir":"Reference","previous_headings":"","what":"Visualize the D score, B/C score and index — plot_score_index","title":"Visualize the D score, B/C score and index — plot_score_index","text":"graph visualize result falls relative thresholds used calculate index values combination D score B/C score affects index value.","code":""},{"path":"https://landscitech.github.io/ccviR/reference/plot_score_index.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Visualize the D score, B/C score and index — plot_score_index","text":"","code":"plot_score_index(b_c_score, d_score, n_d_factors)"},{"path":"https://landscitech.github.io/ccviR/reference/plot_score_index.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Visualize the D score, B/C score and index — plot_score_index","text":"b_c_score Total score B C sections. d_score Total score D section n_d_factors Number factors scored D section","code":""},{"path":"https://landscitech.github.io/ccviR/reference/plot_score_index.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Visualize the D score, B/C score and index — plot_score_index","text":"ggplot2 graph.","code":""},{"path":"https://landscitech.github.io/ccviR/reference/plot_score_index.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Visualize the D score, B/C score and index — plot_score_index","text":"","code":"base_pth <- system.file(\"extData\", package = \"ccviR\")  clim_vars <- get_clim_vars(file.path(base_pth, \"clim_files/processed\")) #> Error: directory /clim_files/processed does not exist  spat_res <- run_spatial(   range_poly = sf::read_sf(file.path(base_pth, \"rng_poly_high.shp\")),   scale_poly = sf::read_sf(file.path(base_pth, \"assess_poly.shp\")),   clim_vars_lst = clim_vars,   hs_rast = raster::raster(file.path(base_pth, \"HS_rast_high.tif\")),   hs_rcl = matrix(c(0:7, 0, 1, 2, 2 ,2, 2, 2, 3), ncol = 2) ) #> performing spatial analysis #> Error in setdiff(names(clim_vars_lst), c(\"mat\", \"cmd\", \"map\", \"ccei\",     \"htn\", \"clim_poly\")): object 'clim_vars' not found  # vulnerability factor table with score 1 (somewhat increase vulnerability) # for all factors vuln <- make_vuln_df(\"test_species\", val1 = 1, mig = 1)  index_vuln <- calc_vulnerability(spat_res$spat_table, vuln, \"Bird\") #> calculating vulnerability index #> Error in as.vector(y): object 'spat_res' not found  plot_score_index(index_vuln$b_c_score, index_vuln$d_score, index_vuln$n_d_factors) #> Error in ifelse(n_d_factors == 0, -1, d_score): object 'index_vuln' not found"},{"path":"https://landscitech.github.io/ccviR/reference/run_ccvi_app.html","id":null,"dir":"Reference","previous_headings":"","what":"Launch the CCVI app — run_ccvi_app","title":"Launch the CCVI app — run_ccvi_app","text":"Launch ccviR app calculate NatureServe Climate Change Vulnerability Index. See vignette(\"app_vignette\", package = \"ccviR\") details use app.","code":""},{"path":"https://landscitech.github.io/ccviR/reference/run_ccvi_app.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Launch the CCVI app — run_ccvi_app","text":"","code":"run_ccvi_app(   file_dir = getwd(),   launch.browser = TRUE,   port = getOption(\"shiny.port\") )"},{"path":"https://landscitech.github.io/ccviR/reference/run_ccvi_app.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Launch the CCVI app — run_ccvi_app","text":"file_dir directory locate files launch.browser logical. Run CCVI app browser? port launch.browser FALSE, specify port run CCVI app","code":""},{"path":"https://landscitech.github.io/ccviR/reference/run_ccvi_app.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Launch the CCVI app — run_ccvi_app","text":"shiny app.","code":""},{"path":"https://landscitech.github.io/ccviR/reference/run_ccvi_app.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Launch the CCVI app — run_ccvi_app","text":"","code":"if(interactive()){  run_ccvi_app(\"demo\") }"},{"path":"https://landscitech.github.io/ccviR/reference/run_prep_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare climate data — run_prep_data","title":"Prepare climate data — run_prep_data","text":"Prepare data raw form needed calculating index. See NatureServe Guidelines details data prepared.","code":""},{"path":"https://landscitech.github.io/ccviR/reference/run_prep_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare climate data — run_prep_data","text":"","code":"run_prep_data(   mat_norm,   mat_fut,   cmd_norm,   cmd_fut,   ccei = NULL,   map = NULL,   mwmt = NULL,   mcmt = NULL,   clim_poly = NULL,   in_folder = NULL,   out_folder,   reproject = FALSE,   overwrite = FALSE )"},{"path":"https://landscitech.github.io/ccviR/reference/run_prep_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare climate data — run_prep_data","text":"mat_norm, mat_fut, cmd_norm, cmd_fut, ccei, map, mwmt, mcmt, clim_poly file paths find data in_folder given in_folder file path files stored. Files must named according convention described details out_folder file path processed files saved reproject data re-projected lat/long? recommended. overwrite existing files out_folder overwritten?","code":""},{"path":"https://landscitech.github.io/ccviR/reference/run_prep_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare climate data — run_prep_data","text":"Returns nothing. Processed data saved out_folder","code":""},{"path":"https://landscitech.github.io/ccviR/reference/run_prep_data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Prepare climate data — run_prep_data","text":"Definition input data sets file names required in_folder: mat_norm: \"MAT\" mean annual temperature historical normal period mat_fut: \"MAT_2050\" mean annual temperature future   climate change can number eg 2050, 2100 cmd_norm: \"CMD\" climate moisture deficit historical normal period cmd_fut: \"CMD_2050\" climate moisture deficit future   climate change can number eg 2050, 2100 ccei: \"CCEI\" Climate Change Exposure Index NatureServe website map: \"MAP\" mean annual precipitation historical normal period mwmt: \"MWMT\" mean warmest month temperature historical   normal period mcmt: \"MCMT\" mean coldest month temperature historical   normal period clim_poly: optional shapefile polygon range   climate data. created climate data missing   faster provide . Accepted raster file types \".asc\", \".tif\", \".nc\", \".grd\" \".img\"","code":""},{"path":[]},{"path":"https://landscitech.github.io/ccviR/reference/run_prep_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prepare climate data — run_prep_data","text":"","code":"pth_in <- system.file(\"extData/clim_files/raw\", package = \"ccviR\")  pth_out <- system.file(\"extData/clim_files/processed\", package = \"ccviR\")  run_prep_data(in_folder = pth_in, out_folder = pth_out, overwrite = TRUE) #> Error: out_folder does not exist"},{"path":"https://landscitech.github.io/ccviR/reference/run_spatial.html","id":null,"dir":"Reference","previous_headings":"","what":"Run the spatial analysis — run_spatial","title":"Run the spatial analysis — run_spatial","text":"Run required spatial analysis create spat_df input calc_vulnerability clip range polygon appropriate scales.","code":""},{"path":"https://landscitech.github.io/ccviR/reference/run_spatial.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run the spatial analysis — run_spatial","text":"","code":"run_spatial(   range_poly,   scale_poly,   clim_vars_lst,   non_breed_poly = NULL,   ptn_poly = NULL,   hs_rast = NULL,   hs_rcl = NULL,   gain_mod = 1 )"},{"path":"https://landscitech.github.io/ccviR/reference/run_spatial.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run the spatial analysis — run_spatial","text":"range_poly sf polygon object giving species range. scale_poly sf polygon object giving area assessment clim_vars_lst list climate data, result get_clim_vars non_breed_poly Optional. sf polygon object giving species range non-breeding season. ptn_poly Optional. sf polygon object giving locations considered part physiological thermal niche (See NatureServe Guidelines definition). hs_rast Optional. raster results model change habitat suitability caused climate change. hs_rcl matrix used classify hs_rast 0: suitable, 1: lost, 2: maintained, 3: gained. See reclassify details matrix format","code":""},{"path":"https://landscitech.github.io/ccviR/reference/run_spatial.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run the spatial analysis — run_spatial","text":"list elements: spat_table results spatial   analysis, range_poly_assess range polygon clipped   assessment area, range_poly_clim range polygon clipped   extent climate data. spat_table contains following columns: MAT_# percentage species' range exposed class change mean annual temperature historical normal predicted climate. Class 1 highest exposure Class 6 lowest CMD_# percentage species' range exposed class change climate moisture deficit historical normal predicted climate. Class 1 highest exposure Class 6 lowest CCEI_# percentage species' non-breeding range falls climate change exposure index class. Class 4 indicates high exposure Class 1 indicates low exposure perc_non_breed_not_over_ccei precentage non-breeding range overlap CCEI raster data HTN_# percentage species' range exposed class variation historical coldest warmest monts. Class 1 smallest variation Class 4 largest PTN percentage species' range falls cool cold environments may lost reduced assessment area result climate change MAP_max/min maximum minimum historical mean annual precipitation species' range range_change projected decrease range size percentage current range size. Negative numbers indicate increase range size range_overlap percentage current range projected remain future range. range_size area species' range m2","code":""},{"path":"https://landscitech.github.io/ccviR/reference/run_spatial.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Run the spatial analysis — run_spatial","text":"range polygon clipped area overlapping scale_poly also area overlapping extent climate data polygon. range within assessment area used calculate results except historical thermal hydrological niches range within extent climate data used.","code":""},{"path":"https://landscitech.github.io/ccviR/reference/run_spatial.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Run the spatial analysis — run_spatial","text":"","code":"base_pth <- system.file(\"extdata\", package = \"ccviR\")  clim_vars <- get_clim_vars(file.path(base_pth, \"clim_files/processed\"))  run_spatial(   range_poly = sf::read_sf(file.path(base_pth, \"rng_poly_high.shp\"), agr = \"constant\"),   scale_poly = sf::read_sf(file.path(base_pth, \"assess_poly.shp\"), agr = \"constant\"),   clim_vars_lst = clim_vars,   hs_rast = raster::raster(file.path(base_pth, \"HS_rast_high.tif\")),   hs_rcl = matrix(c(0:7, 0, 1, 2, 2 ,2, 2, 2, 3), ncol = 2) ) #> performing spatial analysis #> $spat_table #> # A tibble: 1 × 27 #>   MAT_1 MAT_2 MAT_3 MAT_4 MAT_5 MAT_6 CMD_1 CMD_2 CMD_3 CMD_4 CMD_5 CMD_6 CCEI_1 #>   <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl>  <dbl> #> 1    10    90     0     0     0     0    10    90     0     0     0     0     NA #> # … with 14 more variables: CCEI_2 <dbl>, CCEI_3 <dbl>, CCEI_4 <dbl>, #> #   perc_non_breed_not_over_ccei <dbl>, HTN_1 <dbl>, HTN_2 <dbl>, HTN_3 <dbl>, #> #   HTN_4 <dbl>, PTN <dbl>, MAP_max <dbl>, MAP_min <dbl>, range_change <dbl>, #> #   range_overlap <dbl>, range_size <dbl> #>  #> $range_poly_assess #> Simple feature collection with 1 feature and 2 fields #> Attribute-geometry relationship: 2 constant, 0 aggregate, 0 identity #> Geometry type: POLYGON #> Dimension:     XY #> Bounding box:  xmin: 0 ymin: 750 xmax: 1000 ymax: 1000 #> Projected CRS: NAD83(CSRS) / Ontario MNR Lambert #> # A tibble: 1 × 3 #>     FID FID.1                                      geometry #> * <dbl> <dbl>                                 <POLYGON [m]> #> 1     0     0 ((0 750, 0 1000, 1000 1000, 1000 750, 0 750)) #>  #> $range_poly_clim #> Simple feature collection with 1 feature and 2 fields #> Attribute-geometry relationship: 2 constant, 0 aggregate, 0 identity #> Geometry type: POLYGON #> Dimension:     XY #> Bounding box:  xmin: 0 ymin: 750 xmax: 1000 ymax: 1000 #> Projected CRS: NAD83(CSRS) / Ontario MNR Lambert #> # A tibble: 1 × 3 #>     FID FID.1                                      geometry #> * <dbl> <dbl>                                 <POLYGON [m]> #> 1     0     0 ((0 750, 0 1000, 1000 1000, 1000 750, 0 750)) #>"},{"path":"https://landscitech.github.io/ccviR/reference/trim_ras.html","id":null,"dir":"Reference","previous_headings":"","what":"Trim NAs from raster — trim_ras","title":"Trim NAs from raster — trim_ras","text":"Extracted raster package internal .memtrimlayer raster::trim. memory safe raster::trim takes hour takes ~30s","code":""},{"path":"https://landscitech.github.io/ccviR/reference/trim_ras.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Trim NAs from raster — trim_ras","text":"","code":"trim_ras(r, padding = 0, values = NA, filename = \"\", ...)"},{"path":"https://landscitech.github.io/ccviR/reference/trim_ras.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Trim NAs from raster — trim_ras","text":"r raster trimmed padding integer. Number outer rows/columns keep values numeric. Value(s) based Raster* trimmed filename character. Optional output filename ... x Raster* object: additional arguments writeRaster","code":""},{"path":"https://landscitech.github.io/ccviR/reference/trim_ras.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Trim NAs from raster — trim_ras","text":"trimmed Raster* object","code":""},{"path":"https://landscitech.github.io/ccviR/reference/trim_ras.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Trim NAs from raster — trim_ras","text":"","code":"library(raster) #> Loading required package: sp  rast <- raster(matrix(NA, nrow = 100, ncol = 100))  rast[30:60, 30:60] <- 1  trim_ras(rast) #> class      : RasterLayer  #> dimensions : 31, 31, 961  (nrow, ncol, ncell) #> resolution : 0.01, 0.01  (x, y) #> extent     : 0.29, 0.6, 0.4, 0.71  (xmin, xmax, ymin, ymax) #> crs        : NA  #> source     : memory #> names      : layer  #> values     : 1, 1  (min, max) #>"},{"path":"https://landscitech.github.io/ccviR/reference/vulnq_code_lu_tbl.html","id":null,"dir":"Reference","previous_headings":"","what":"Lookup table for vulnerability factor codes — vulnq_code_lu_tbl","title":"Lookup table for vulnerability factor codes — vulnq_code_lu_tbl","text":"Lookup table vulnerability factor questions, codes, maximum value, whether factor calculated spatial analysis.","code":""},{"path":"https://landscitech.github.io/ccviR/reference/vulnq_code_lu_tbl.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Lookup table for vulnerability factor codes — vulnq_code_lu_tbl","text":"","code":"vulnq_code_lu_tbl"},{"path":"https://landscitech.github.io/ccviR/reference/vulnq_code_lu_tbl.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Lookup table for vulnerability factor codes — vulnq_code_lu_tbl","text":"object class data.frame 27 rows 4 columns.","code":""}]
